## Диаграммы последовательностей

На диаграмме движения рассматривается итерация главного цикла, обрабатывающая нажатия клавиши перемещения.
Это клавиши W, A, S, D.

Перед каждой итерацией информация о зажатых клавишах обнуляется также с помощью `InputSystem`.
Игрок нажал клавишу W.
Этот сигнал обрабатывает `InputSystem`: устанавливает значение поля класса `Input`, отвечающее за нажатие клавиши W.


После этого `IntentionSystem` считывает информацию о зажатых клавишах из класса `Input` и преобразует ее в `IntentionComponent`.
В данном случае `IntentionComponent` будут содержать информацию о том, что нужно двигаться вверх.

Эта информация обрабатывается `MoveSystem`.
Она проходится по всем имеющимся у нее `RealComponent` и с помощью `entity_id` выбирает те сущности, которые имеют `RealComponent`.
Затем для каждой сущности производится проверка возможности двинуться в намеченном направлении и происходит перемещение: изменение координат в `RealComponent`.

После перемещения `InventorySystem` проверяет коллизии игрока с предметами на карте.
`InventorySystem` итерируется по `InventoryComponent`.
Наличие этой компоненты у сущности говорит о том, что она имеет инвентарь.
Для каждой такой сущности ищется пересечение с объектами на карте.
Если такое пересечение найдено, то у сущности этого предмета убирается `MapItemComponent` и добавляется `InventoryItemComponent`.

Отрисовка происходит с помощью `DrawSystem` и `PresentSystem`:
* Очищается `ImageBuffer`.
* `DrawSystem` итерируется по всем `DrawableComponent` и находит относящиеся к сущностям с `RealComponent`.
* Все такие сущности рисуются в `ImageBuffer` с обновленными координатами.
* `PresentSystem` итерируется по объектам `ImageBuffer` и отрисовывает их на консоль.
